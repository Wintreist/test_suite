# Устранение неполадок при сборке

## Частые проблемы и решения

### Windows

#### Ошибка: "uv не установлен"
**Решение:**
1. Установите uv: https://github.com/astral-sh/uv#installation
2. Перезапустите командную строку
3. Проверьте установку: `uv --version`

#### Ошибка: "Не удалось синхронизировать зависимости"
**Возможные причины:**
- Нет доступа к интернету
- Проблемы с SSH ключами для приватных репозиториев
- Неправильная конфигурация git

**Решение:**
1. Проверьте интернет соединение
2. Настройте SSH ключи для доступа к git репозиториям
3. Попробуйте запустить `uv sync` вручную для диагностики

#### Ошибка при сборке PyInstaller
**Решение:**
1. Убедитесь что все зависимости установлены
2. Попробуйте очистить кеш: `uv cache clean`
3. Удалите папки `build` и `dist` и попробуйте снова

### Linux (Docker)

#### Ошибка: "Docker не установлен или не запущен"
**Решение:**
1. Установите Docker Desktop
2. Запустите Docker Desktop
3. Проверьте: `docker --version`

#### Ошибка: "permission denied" при копировании файлов
**Решение:**
1. Убедитесь что Docker Desktop запущен с правами администратора
2. Проверьте права доступа к папке проекта

#### Медленная сборка Docker образа
**Причина:** Первая сборка может занять много времени из-за загрузки базового образа и зависимостей.

**Решение:** Дождитесь завершения. Последующие сборки будут быстрее благодаря кешированию.

### Общие проблемы

#### Большой размер исполняемого файла
**Причина:** PyInstaller включает все зависимости.

**Возможные решения:**
1. Исключите ненужные модули в spec файле
2. Используйте UPX сжатие (уже включено)
3. Рассмотрите использование виртуального окружения с минимальными зависимостями

#### Медленный запуск исполняемого файла
**Причина:** PyInstaller распаковывает файлы при первом запуске.

**Решение:** Это нормальное поведение, последующие запуски будут быстрее.

#### Ошибки при работе с git репозиториями
**Решение:**
1. Убедитесь что git установлен на целевой системе
2. Настройте SSH ключи или используйте HTTPS
3. Проверьте права доступа к репозиториям

## Отладка

### Включение отладочного режима PyInstaller

Отредактируйте `test_suite_executor.spec`:
```python
exe = EXE(
    # ...
    debug=True,  # Изменить на True
    # ...
)
```

### Проверка зависимостей

```bash
uv run pyinstaller --collect-all test_suite_executor test_suite_executor.spec
```

### Тестирование исполняемого файла

```bash
# Windows
.\dist\test-suite-executor.exe --help

# Linux  
./dist/test-suite-executor --help
```

## Получение помощи

1. Проверьте логи сборки на наличие конкретных ошибок
2. Убедитесь что все предварительные требования выполнены
3. Попробуйте сборку в чистом окружении

Если проблема не решается, откройте issue с полным логом ошибки.